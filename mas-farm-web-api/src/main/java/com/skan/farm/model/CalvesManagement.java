package com.skan.farm.model;

import com.fasterxml.jackson.annotation.*;
import lombok.*;

import javax.persistence.*;
import java.io.Serializable;
import java.time.LocalDate;
import java.time.LocalDateTime;

/**
 * 분만관리(송아지 관리) 모델 클래스.
 *
 * @author generated by ERMaster
 * @version $Id$
 */
@Entity
@Getter
@Setter
@ToString(exclude = {"localBeefManagement", "localBeefManagement2"})
//@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class)
@JsonIgnoreProperties(ignoreUnknown = true,value = {"hibernateLazyInitializer","$$_hibernate_interceptor", "handler"})
@JsonAutoDetect(fieldVisibility = JsonAutoDetect.Visibility.ANY)
public class CalvesManagement {

    @Builder
    public CalvesManagement(CalvesManagementPK calvesManagementPK, Short fertilizationIndex, String years, LocalDateTime fertilizationDate, LocalDateTime expectedDateConfinement, LocalDateTime calvingDate, String spermNo, String nothingSpecial, String entityIdentificationNumberChild, String entityManagementNumberChild) {
        this.calvesManagementPK = calvesManagementPK;
        this.fertilizationIndex = fertilizationIndex;
        this.years = years;
        this.fertilizationDate = fertilizationDate;
        this.expectedDateConfinement = expectedDateConfinement;
        this.calvingDate = calvingDate;
        this.spermNo = spermNo;
        this.nothingSpecial = nothingSpecial;
        this.entityIdentificationNumberChild = entityIdentificationNumberChild;
        this.entityManagementNumberChild = entityManagementNumberChild;
    }

    /**
     * serialVersionUID.
     */
    private static final long serialVersionUID = 1L;

    @Embeddable
    @Getter
    @Setter
    @EqualsAndHashCode
    @AllArgsConstructor
    public static class CalvesManagementPK implements Serializable {

        public CalvesManagementPK() {
        }

        /**
         * 개체관리번호.
         */
        @Column(length = 32)
        private String entityManagementNumber;

        /**
         * 개체식별번호.
         */
        @Column(length = 32)
        private String entityIdentificationNumber;

        /**
         * 순번.
         */
        private Short seq;
    }

    @EmbeddedId
    CalvesManagementPK calvesManagementPK;


    /**
     * 수정 회차.
     */
    private Short fertilizationIndex;

    /**
     * 년도.
     */
    private String years;

    /**
     * 수정일자.
     */
    private LocalDateTime fertilizationDate;

    /**
     * 분만예정일.
     */
    private LocalDateTime expectedDateConfinement;

    /**
     * 실제 분만일자.
     */
    private LocalDateTime calvingDate;

    /**
     * 정액번호.
     */
    private String spermNo;

    /**
     * 특이사항.
     */
    private String nothingSpecial;

    /**
     * 개체식별번호(자식).
     */
    @Column(nullable = true)
    private String entityIdentificationNumberChild;

    /**
     * 개체관리번호(자식).
     */
    @Column(nullable = true)
    private String entityManagementNumberChild;

    /**
     * 한우(암소/수소) 개체관리기록부.
     * 식별 연결
     */
    @MapsId("localBeefManagementPK")
    @ManyToOne(fetch = FetchType.LAZY
            , cascade = {CascadeType.PERSIST, CascadeType.MERGE}
            )
    @JoinColumns({
            @JoinColumn(name = "entityIdentificationNumber", referencedColumnName = "entityIdentificationNumber", insertable = false, updatable = false),
            @JoinColumn(name = "entityManagementNumber", referencedColumnName = "entityManagementNumber", insertable = false, updatable = false),
    })
    @JsonBackReference("calvesManagementSet")
    private LocalBeefManagement localBeefManagement;

    /**
     * 비식별 연동 키  (FK를 걸기 위함)
     */
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "entityIdentificationNumberChild", referencedColumnName = "entityIdentificationNumber", insertable = false, updatable = false)
    @JoinColumn(name = "entityManagementNumberChild", referencedColumnName = "entityManagementNumber", insertable = false, updatable = false)
    @JsonBackReference("calvesManagementSet2")
    private LocalBeefManagement localBeefManagement2;

    /**
     * 생성자.
     */
    public CalvesManagement() {
    }


}
